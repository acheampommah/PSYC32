{
  "hash": "a588254030a03a011d7d9f754aacc192",
  "result": {
    "markdown": "---\ntitle: \"Drawing maps with R\"\n---\n\n\n\n## Making maps in R\n\n- Spatial data comes with locations (perhaps with information about those locations).\n- A good way to draw spatial data is on a map.\n- The leaflet package is the easiest way to draw maps in R.\n- Install these two packages, with two familiar ones:\n\n\\small\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tmaptools)\nlibrary(leaflet)\nlibrary(tidyverse)\nlibrary(conflicted)\nconflicts_prefer(dplyr::mutate)\nconflicts_prefer(dplyr::arrange)\n```\n:::\n\n\\normalsize\n\n## Hockey league map\n\nThe Ontario hockey divisions (the last example for cluster analysis) came with a very bad map. Can we do better?\n\n- reload the Ontario road distances\n\n\\small\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_url <-\n  \"http://ritsokiguess.site/datafiles/ontario-road-distances.csv\"\n# my_url <- \"ontario-road-distances.csv\"\nontario <- read_csv(my_url)\n```\n:::\n\n\\normalsize\n\n## Ontario road distances (some)\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nontario\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"place\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Barrie\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Belleville\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Brantford\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Brockville\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Cornwall\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hamilton\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Huntsville\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Kingston\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Kitchener\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"London\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Niagara Falls\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"North Bay\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Ottawa\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Owen Sound\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Peterborough\"],\"name\":[16],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sarnia\"],\"name\":[17],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Sault Ste Marie\"],\"name\":[18],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"St Catharines\"],\"name\":[19],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Thunder Bay\"],\"name\":[20],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Toronto\"],\"name\":[21],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Windsor\"],\"name\":[22],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Barrie\",\"2\":\"0\",\"3\":\"260\",\"4\":\"190\",\"5\":\"405\",\"6\":\"500\",\"7\":\"145\",\"8\":\"125\",\"9\":\"330\",\"10\":\"180\",\"11\":\"260\",\"12\":\"220\",\"13\":\"250\",\"14\":\"430\",\"15\":\"120\",\"16\":\"160\",\"17\":\"315\",\"18\":\"595\",\"19\":\"200\",\"20\":\"1285\",\"21\":\"90\",\"22\":\"430\"},{\"1\":\"Belleville\",\"2\":\"260\",\"3\":\"0\",\"4\":\"290\",\"5\":\"155\",\"6\":\"250\",\"7\":\"255\",\"8\":\"280\",\"9\":\"75\",\"10\":\"280\",\"11\":\"360\",\"12\":\"315\",\"13\":\"400\",\"14\":\"230\",\"15\":\"360\",\"16\":\"105\",\"17\":\"455\",\"18\":\"805\",\"19\":\"300\",\"20\":\"1495\",\"21\":\"190\",\"22\":\"545\"},{\"1\":\"Brantford\",\"2\":\"190\",\"3\":\"290\",\"4\":\"0\",\"5\":\"420\",\"6\":\"535\",\"7\":\"40\",\"8\":\"300\",\"9\":\"340\",\"10\":\"40\",\"11\":\"85\",\"12\":\"105\",\"13\":\"430\",\"14\":\"500\",\"15\":\"185\",\"16\":\"230\",\"17\":\"185\",\"18\":\"755\",\"19\":\"90\",\"20\":\"1245\",\"21\":\"85\",\"22\":\"275\"},{\"1\":\"Brockville\",\"2\":\"405\",\"3\":\"155\",\"4\":\"420\",\"5\":\"0\",\"6\":\"95\",\"7\":\"405\",\"8\":\"405\",\"9\":\"80\",\"10\":\"425\",\"11\":\"510\",\"12\":\"465\",\"13\":\"420\",\"14\":\"110\",\"15\":\"510\",\"16\":\"255\",\"17\":\"605\",\"18\":\"850\",\"19\":\"445\",\"20\":\"1525\",\"21\":\"340\",\"22\":\"695\"},{\"1\":\"Cornwall\",\"2\":\"500\",\"3\":\"250\",\"4\":\"535\",\"5\":\"95\",\"6\":\"0\",\"7\":\"500\",\"8\":\"450\",\"9\":\"180\",\"10\":\"520\",\"11\":\"605\",\"12\":\"560\",\"13\":\"465\",\"14\":\"100\",\"15\":\"605\",\"16\":\"340\",\"17\":\"700\",\"18\":\"895\",\"19\":\"540\",\"20\":\"1570\",\"21\":\"435\",\"22\":\"790\"},{\"1\":\"Hamilton\",\"2\":\"145\",\"3\":\"255\",\"4\":\"40\",\"5\":\"405\",\"6\":\"500\",\"7\":\"0\",\"8\":\"270\",\"9\":\"330\",\"10\":\"60\",\"11\":\"125\",\"12\":\"70\",\"13\":\"395\",\"14\":\"470\",\"15\":\"190\",\"16\":\"200\",\"17\":\"220\",\"18\":\"740\",\"19\":\"50\",\"20\":\"1430\",\"21\":\"70\",\"22\":\"310\"},{\"1\":\"Huntsville\",\"2\":\"125\",\"3\":\"280\",\"4\":\"300\",\"5\":\"405\",\"6\":\"450\",\"7\":\"270\",\"8\":\"0\",\"9\":\"350\",\"10\":\"280\",\"11\":\"365\",\"12\":\"330\",\"13\":\"130\",\"14\":\"350\",\"15\":\"240\",\"16\":\"195\",\"17\":\"440\",\"18\":\"545\",\"19\":\"310\",\"20\":\"1230\",\"21\":\"215\",\"22\":\"555\"},{\"1\":\"Kingston\",\"2\":\"330\",\"3\":\"75\",\"4\":\"340\",\"5\":\"80\",\"6\":\"180\",\"7\":\"330\",\"8\":\"350\",\"9\":\"0\",\"10\":\"350\",\"11\":\"430\",\"12\":\"390\",\"13\":\"460\",\"14\":\"175\",\"15\":\"430\",\"16\":\"180\",\"17\":\"530\",\"18\":\"875\",\"19\":\"370\",\"20\":\"1565\",\"21\":\"260\",\"22\":\"620\"},{\"1\":\"Kitchener\",\"2\":\"180\",\"3\":\"280\",\"4\":\"40\",\"5\":\"425\",\"6\":\"520\",\"7\":\"60\",\"8\":\"280\",\"9\":\"350\",\"10\":\"0\",\"11\":\"100\",\"12\":\"130\",\"13\":\"405\",\"14\":\"490\",\"15\":\"150\",\"16\":\"220\",\"17\":\"190\",\"18\":\"750\",\"19\":\"110\",\"20\":\"1440\",\"21\":\"105\",\"22\":\"285\"},{\"1\":\"London\",\"2\":\"260\",\"3\":\"360\",\"4\":\"85\",\"5\":\"510\",\"6\":\"605\",\"7\":\"125\",\"8\":\"365\",\"9\":\"430\",\"10\":\"100\",\"11\":\"0\",\"12\":\"190\",\"13\":\"495\",\"14\":\"570\",\"15\":\"210\",\"16\":\"300\",\"17\":\"100\",\"18\":\"840\",\"19\":\"180\",\"20\":\"1525\",\"21\":\"185\",\"22\":\"190\"},{\"1\":\"Niagara Falls\",\"2\":\"220\",\"3\":\"315\",\"4\":\"105\",\"5\":\"465\",\"6\":\"560\",\"7\":\"70\",\"8\":\"330\",\"9\":\"390\",\"10\":\"130\",\"11\":\"190\",\"12\":\"0\",\"13\":\"455\",\"14\":\"530\",\"15\":\"260\",\"16\":\"260\",\"17\":\"290\",\"18\":\"800\",\"19\":\"20\",\"20\":\"1490\",\"21\":\"130\",\"22\":\"380\"},{\"1\":\"North Bay\",\"2\":\"250\",\"3\":\"400\",\"4\":\"430\",\"5\":\"420\",\"6\":\"465\",\"7\":\"395\",\"8\":\"130\",\"9\":\"460\",\"10\":\"405\",\"11\":\"495\",\"12\":\"455\",\"13\":\"0\",\"14\":\"365\",\"15\":\"370\",\"16\":\"320\",\"17\":\"565\",\"18\":\"430\",\"19\":\"435\",\"20\":\"1105\",\"21\":\"345\",\"22\":\"680\"},{\"1\":\"Ottawa\",\"2\":\"430\",\"3\":\"230\",\"4\":\"500\",\"5\":\"110\",\"6\":\"100\",\"7\":\"470\",\"8\":\"350\",\"9\":\"175\",\"10\":\"490\",\"11\":\"570\",\"12\":\"530\",\"13\":\"365\",\"14\":\"0\",\"15\":\"545\",\"16\":\"270\",\"17\":\"670\",\"18\":\"795\",\"19\":\"510\",\"20\":\"1465\",\"21\":\"400\",\"22\":\"760\"},{\"1\":\"Owen Sound\",\"2\":\"120\",\"3\":\"360\",\"4\":\"185\",\"5\":\"510\",\"6\":\"605\",\"7\":\"190\",\"8\":\"240\",\"9\":\"430\",\"10\":\"150\",\"11\":\"210\",\"12\":\"260\",\"13\":\"370\",\"14\":\"545\",\"15\":\"0\",\"16\":\"275\",\"17\":\"255\",\"18\":\"685\",\"19\":\"240\",\"20\":\"1375\",\"21\":\"190\",\"22\":\"390\"},{\"1\":\"Peterborough\",\"2\":\"160\",\"3\":\"105\",\"4\":\"230\",\"5\":\"255\",\"6\":\"340\",\"7\":\"200\",\"8\":\"195\",\"9\":\"180\",\"10\":\"220\",\"11\":\"300\",\"12\":\"260\",\"13\":\"320\",\"14\":\"270\",\"15\":\"275\",\"16\":\"0\",\"17\":\"400\",\"18\":\"700\",\"19\":\"240\",\"20\":\"1390\",\"21\":\"135\",\"22\":\"490\"},{\"1\":\"Sarnia\",\"2\":\"315\",\"3\":\"455\",\"4\":\"185\",\"5\":\"605\",\"6\":\"700\",\"7\":\"220\",\"8\":\"440\",\"9\":\"530\",\"10\":\"190\",\"11\":\"100\",\"12\":\"290\",\"13\":\"565\",\"14\":\"670\",\"15\":\"255\",\"16\":\"400\",\"17\":\"0\",\"18\":\"910\",\"19\":\"275\",\"20\":\"1600\",\"21\":\"280\",\"22\":\"160\"},{\"1\":\"Sault Ste Marie\",\"2\":\"595\",\"3\":\"805\",\"4\":\"755\",\"5\":\"850\",\"6\":\"895\",\"7\":\"740\",\"8\":\"545\",\"9\":\"875\",\"10\":\"750\",\"11\":\"840\",\"12\":\"800\",\"13\":\"430\",\"14\":\"795\",\"15\":\"685\",\"16\":\"700\",\"17\":\"910\",\"18\":\"0\",\"19\":\"780\",\"20\":\"690\",\"21\":\"690\",\"22\":\"1025\"},{\"1\":\"St Catharines\",\"2\":\"200\",\"3\":\"300\",\"4\":\"90\",\"5\":\"445\",\"6\":\"540\",\"7\":\"50\",\"8\":\"310\",\"9\":\"370\",\"10\":\"110\",\"11\":\"180\",\"12\":\"20\",\"13\":\"435\",\"14\":\"510\",\"15\":\"240\",\"16\":\"240\",\"17\":\"275\",\"18\":\"780\",\"19\":\"0\",\"20\":\"1470\",\"21\":\"110\",\"22\":\"365\"},{\"1\":\"Thunder Bay\",\"2\":\"1285\",\"3\":\"1495\",\"4\":\"1245\",\"5\":\"1525\",\"6\":\"1570\",\"7\":\"1430\",\"8\":\"1230\",\"9\":\"1565\",\"10\":\"1440\",\"11\":\"1525\",\"12\":\"1490\",\"13\":\"1105\",\"14\":\"1465\",\"15\":\"1375\",\"16\":\"1390\",\"17\":\"1600\",\"18\":\"690\",\"19\":\"1470\",\"20\":\"0\",\"21\":\"1375\",\"22\":\"1715\"},{\"1\":\"Toronto\",\"2\":\"90\",\"3\":\"190\",\"4\":\"85\",\"5\":\"340\",\"6\":\"435\",\"7\":\"70\",\"8\":\"215\",\"9\":\"260\",\"10\":\"105\",\"11\":\"185\",\"12\":\"130\",\"13\":\"345\",\"14\":\"400\",\"15\":\"190\",\"16\":\"135\",\"17\":\"280\",\"18\":\"690\",\"19\":\"110\",\"20\":\"1375\",\"21\":\"0\",\"22\":\"370\"},{\"1\":\"Windsor\",\"2\":\"430\",\"3\":\"545\",\"4\":\"275\",\"5\":\"695\",\"6\":\"790\",\"7\":\"310\",\"8\":\"555\",\"9\":\"620\",\"10\":\"285\",\"11\":\"190\",\"12\":\"380\",\"13\":\"680\",\"14\":\"760\",\"15\":\"390\",\"16\":\"490\",\"17\":\"160\",\"18\":\"1025\",\"19\":\"365\",\"20\":\"1715\",\"21\":\"370\",\"22\":\"0\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n## Grab the places\n\n- and append province (\"ON\") for reasons shortly to become clear:\n\n\\small\n\n::: {.cell}\n\n```{.r .cell-code}\ntibble(place = ontario$place) %>% \n  mutate(prov = \"ON\") %>% \n  unite(place1, c(place, prov), sep = \" \") -> ontario2\nontario2\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"place1\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Barrie ON\"},{\"1\":\"Belleville ON\"},{\"1\":\"Brantford ON\"},{\"1\":\"Brockville ON\"},{\"1\":\"Cornwall ON\"},{\"1\":\"Hamilton ON\"},{\"1\":\"Huntsville ON\"},{\"1\":\"Kingston ON\"},{\"1\":\"Kitchener ON\"},{\"1\":\"London ON\"},{\"1\":\"Niagara Falls ON\"},{\"1\":\"North Bay ON\"},{\"1\":\"Ottawa ON\"},{\"1\":\"Owen Sound ON\"},{\"1\":\"Peterborough ON\"},{\"1\":\"Sarnia ON\"},{\"1\":\"Sault Ste Marie ON\"},{\"1\":\"St Catharines ON\"},{\"1\":\"Thunder Bay ON\"},{\"1\":\"Toronto ON\"},{\"1\":\"Windsor ON\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\\normalsize\n\n## Geocode 1/2\n\n- find their latitudes and longitudes (\"geocode\"; slow). \n- Save the geocoded places.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nontario2 %>% \n  rowwise() %>% \n  mutate(ll = list(geocode_OSM(place1))) -> d\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n\\small\n\n::: {.cell}\n\n```{.r .cell-code}\nd\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"place1\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"ll\"],\"name\":[2],\"type\":[\"list\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Barrie ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Belleville ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Brantford ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Brockville ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Cornwall ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Hamilton ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Huntsville ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Kingston ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Kitchener ON\",\"2\":\"<named list [3]>\"},{\"1\":\"London ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Niagara Falls ON\",\"2\":\"<named list [3]>\"},{\"1\":\"North Bay ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Ottawa ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Owen Sound ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Peterborough ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Sarnia ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Sault Ste Marie ON\",\"2\":\"<named list [3]>\"},{\"1\":\"St Catharines ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Thunder Bay ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Toronto ON\",\"2\":\"<named list [3]>\"},{\"1\":\"Windsor ON\",\"2\":\"<named list [3]>\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\\normalsize\n\n## Geocode 2/2\n\nUntangle the lats and longs:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd %>% \n  unnest_wider(ll) %>% \n  unnest_wider(coords) -> ontario3\nontario3\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"place1\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"query\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"x\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"y\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"bbox\"],\"name\":[5],\"type\":[\"list\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Barrie ON\",\"2\":\"Barrie ON\",\"3\":\"-79.69017\",\"4\":\"44.38931\",\"5\":\"<bbox>\"},{\"1\":\"Belleville ON\",\"2\":\"Belleville ON\",\"3\":\"-77.38526\",\"4\":\"44.16333\",\"5\":\"<bbox>\"},{\"1\":\"Brantford ON\",\"2\":\"Brantford ON\",\"3\":\"-80.26317\",\"4\":\"43.14082\",\"5\":\"<bbox>\"},{\"1\":\"Brockville ON\",\"2\":\"Brockville ON\",\"3\":\"-75.68433\",\"4\":\"44.58959\",\"5\":\"<bbox>\"},{\"1\":\"Cornwall ON\",\"2\":\"Cornwall ON\",\"3\":\"-74.72870\",\"4\":\"45.01844\",\"5\":\"<bbox>\"},{\"1\":\"Hamilton ON\",\"2\":\"Hamilton ON\",\"3\":\"-79.87286\",\"4\":\"43.25608\",\"5\":\"<bbox>\"},{\"1\":\"Huntsville ON\",\"2\":\"Huntsville ON\",\"3\":\"-79.21843\",\"4\":\"45.32639\",\"5\":\"<bbox>\"},{\"1\":\"Kingston ON\",\"2\":\"Kingston ON\",\"3\":\"-76.48132\",\"4\":\"44.23069\",\"5\":\"<bbox>\"},{\"1\":\"Kitchener ON\",\"2\":\"Kitchener ON\",\"3\":\"-80.49278\",\"4\":\"43.45129\",\"5\":\"<bbox>\"},{\"1\":\"London ON\",\"2\":\"London ON\",\"3\":\"-81.24337\",\"4\":\"42.98324\",\"5\":\"<bbox>\"},{\"1\":\"Niagara Falls ON\",\"2\":\"Niagara Falls ON\",\"3\":\"-79.06390\",\"4\":\"43.10656\",\"5\":\"<bbox>\"},{\"1\":\"North Bay ON\",\"2\":\"North Bay ON\",\"3\":\"-79.46076\",\"4\":\"46.30921\",\"5\":\"<bbox>\"},{\"1\":\"Ottawa ON\",\"2\":\"Ottawa ON\",\"3\":\"-75.69011\",\"4\":\"45.42088\",\"5\":\"<bbox>\"},{\"1\":\"Owen Sound ON\",\"2\":\"Owen Sound ON\",\"3\":\"-80.94301\",\"4\":\"44.56781\",\"5\":\"<bbox>\"},{\"1\":\"Peterborough ON\",\"2\":\"Peterborough ON\",\"3\":\"-78.31995\",\"4\":\"44.30480\",\"5\":\"<bbox>\"},{\"1\":\"Sarnia ON\",\"2\":\"Sarnia ON\",\"3\":\"-82.40656\",\"4\":\"42.97461\",\"5\":\"<bbox>\"},{\"1\":\"Sault Ste Marie ON\",\"2\":\"Sault Ste Marie ON\",\"3\":\"-84.32007\",\"4\":\"46.52391\",\"5\":\"<bbox>\"},{\"1\":\"St Catharines ON\",\"2\":\"St Catharines ON\",\"3\":\"-79.24410\",\"4\":\"43.15798\",\"5\":\"<bbox>\"},{\"1\":\"Thunder Bay ON\",\"2\":\"Thunder Bay ON\",\"3\":\"-88.48118\",\"4\":\"49.80966\",\"5\":\"<bbox>\"},{\"1\":\"Toronto ON\",\"2\":\"Toronto ON\",\"3\":\"-79.38393\",\"4\":\"43.65348\",\"5\":\"<bbox>\"},{\"1\":\"Windsor ON\",\"2\":\"Windsor ON\",\"3\":\"-83.03734\",\"4\":\"42.31674\",\"5\":\"<bbox>\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n## Make map\n\n- finally:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nleaflet(data = ontario3) %>% \n  addTiles() %>% \n  addCircleMarkers(lng = ~x, lat = ~y) \n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-b60d711ae3d4f68852d2\" style=\"width:960px;height:480px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-b60d711ae3d4f68852d2\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"https://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]},{\"method\":\"addCircleMarkers\",\"args\":[[44.3893113,44.1633264,43.1408157,44.5895925,45.0184417,43.2560802,45.3263919,44.230687,43.451291,42.9832406,43.1065603,46.3092115,45.4208777,44.5678105,44.3048009,42.9746137,46.52391,43.1579812,49.809661,43.6534817,42.3167397],[-79.69017359999999,-77.38525559999999,-80.26317330000001,-75.6843332,-74.728703,-79.8728583,-79.218434,-76.481323,-80.49278150000001,-81.24337199999999,-79.0639039,-79.46076170000001,-75.6901106,-80.94300939999999,-78.3199496,-82.4065585,-84.32006800000001,-79.2441003,-88.48117910000001,-79.3839347,-83.03733889999999],10,null,null,{\"interactive\":true,\"className\":\"\",\"stroke\":true,\"color\":\"#03F\",\"weight\":5,\"opacity\":0.5,\"fill\":true,\"fillColor\":\"#03F\",\"fillOpacity\":0.2},null,null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[42.3167397,49.809661],\"lng\":[-88.48117910000001,-74.728703]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n \n\n\n\n## Cluster analysis revisited\n\n\n::: {.cell}\n\n```{.r .cell-code}\nontario %>% select(-1) %>% as.dist() -> ontario.d\nontario.hc <- hclust(ontario.d, method = \"ward.D\")\n```\n:::\n\n\n## Seven clusters:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(ontario.hc)\nrect.hclust(ontario.hc, 7)\n```\n\n::: {.cell-output-display}\n![](mapping_files/figure-revealjs/mapping-9-1.png){width=960}\n:::\n:::\n\n\n## Get the clusters\n\n\\footnotesize\n\n::: {.cell}\n\n```{.r .cell-code}\ntibble(place = ontario$place, cluster = cutree(ontario.hc, 7)) -> clusters\nclusters %>% arrange(cluster)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"place\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"cluster\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Barrie\",\"2\":\"1\"},{\"1\":\"Brantford\",\"2\":\"1\"},{\"1\":\"Hamilton\",\"2\":\"1\"},{\"1\":\"Kitchener\",\"2\":\"1\"},{\"1\":\"Niagara Falls\",\"2\":\"1\"},{\"1\":\"Owen Sound\",\"2\":\"1\"},{\"1\":\"St Catharines\",\"2\":\"1\"},{\"1\":\"Toronto\",\"2\":\"1\"},{\"1\":\"Belleville\",\"2\":\"2\"},{\"1\":\"Kingston\",\"2\":\"2\"},{\"1\":\"Peterborough\",\"2\":\"2\"},{\"1\":\"Brockville\",\"2\":\"3\"},{\"1\":\"Cornwall\",\"2\":\"3\"},{\"1\":\"Ottawa\",\"2\":\"3\"},{\"1\":\"Huntsville\",\"2\":\"4\"},{\"1\":\"North Bay\",\"2\":\"4\"},{\"1\":\"London\",\"2\":\"5\"},{\"1\":\"Sarnia\",\"2\":\"5\"},{\"1\":\"Windsor\",\"2\":\"5\"},{\"1\":\"Sault Ste Marie\",\"2\":\"6\"},{\"1\":\"Thunder Bay\",\"2\":\"7\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\\normalsize\n\n## Combine clusters\n\n- combine clusters 6 and 7 with 4 (\"north\")\n- combine clusters 2 and 3 (\"east\")\n- make named divisions\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclusters %>% \n  mutate(division = fct_collapse(factor(cluster),\n                                \"north\" = c(\"4\", \"6\", \"7\"),\n                                \"east\" = c(\"2\", \"3\"),\n                                \"west\" = \"5\",\n                                \"central\" = \"1\")) %>% \n  arrange(division) -> divisions\n```\n:::\n\n\n## The divisions\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndivisions\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"place\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"cluster\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"division\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Barrie\",\"2\":\"1\",\"3\":\"central\"},{\"1\":\"Brantford\",\"2\":\"1\",\"3\":\"central\"},{\"1\":\"Hamilton\",\"2\":\"1\",\"3\":\"central\"},{\"1\":\"Kitchener\",\"2\":\"1\",\"3\":\"central\"},{\"1\":\"Niagara Falls\",\"2\":\"1\",\"3\":\"central\"},{\"1\":\"Owen Sound\",\"2\":\"1\",\"3\":\"central\"},{\"1\":\"St Catharines\",\"2\":\"1\",\"3\":\"central\"},{\"1\":\"Toronto\",\"2\":\"1\",\"3\":\"central\"},{\"1\":\"Belleville\",\"2\":\"2\",\"3\":\"east\"},{\"1\":\"Brockville\",\"2\":\"3\",\"3\":\"east\"},{\"1\":\"Cornwall\",\"2\":\"3\",\"3\":\"east\"},{\"1\":\"Kingston\",\"2\":\"2\",\"3\":\"east\"},{\"1\":\"Ottawa\",\"2\":\"3\",\"3\":\"east\"},{\"1\":\"Peterborough\",\"2\":\"2\",\"3\":\"east\"},{\"1\":\"Huntsville\",\"2\":\"4\",\"3\":\"north\"},{\"1\":\"North Bay\",\"2\":\"4\",\"3\":\"north\"},{\"1\":\"Sault Ste Marie\",\"2\":\"6\",\"3\":\"north\"},{\"1\":\"Thunder Bay\",\"2\":\"7\",\"3\":\"north\"},{\"1\":\"London\",\"2\":\"5\",\"3\":\"west\"},{\"1\":\"Sarnia\",\"2\":\"5\",\"3\":\"west\"},{\"1\":\"Windsor\",\"2\":\"5\",\"3\":\"west\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n## Take \"ON\" off of `ontario3`\n\n\\footnotesize\n\n::: {.cell}\n\n```{.r .cell-code}\nontario3 %>% \n  mutate(place = str_replace(place1, \" ON$\", \"\")) -> ontario3\nontario3\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"place1\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"query\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"x\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"y\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"bbox\"],\"name\":[5],\"type\":[\"list\"],\"align\":[\"right\"]},{\"label\":[\"place\"],\"name\":[6],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Barrie ON\",\"2\":\"Barrie ON\",\"3\":\"-79.69017\",\"4\":\"44.38931\",\"5\":\"<bbox>\",\"6\":\"Barrie\"},{\"1\":\"Belleville ON\",\"2\":\"Belleville ON\",\"3\":\"-77.38526\",\"4\":\"44.16333\",\"5\":\"<bbox>\",\"6\":\"Belleville\"},{\"1\":\"Brantford ON\",\"2\":\"Brantford ON\",\"3\":\"-80.26317\",\"4\":\"43.14082\",\"5\":\"<bbox>\",\"6\":\"Brantford\"},{\"1\":\"Brockville ON\",\"2\":\"Brockville ON\",\"3\":\"-75.68433\",\"4\":\"44.58959\",\"5\":\"<bbox>\",\"6\":\"Brockville\"},{\"1\":\"Cornwall ON\",\"2\":\"Cornwall ON\",\"3\":\"-74.72870\",\"4\":\"45.01844\",\"5\":\"<bbox>\",\"6\":\"Cornwall\"},{\"1\":\"Hamilton ON\",\"2\":\"Hamilton ON\",\"3\":\"-79.87286\",\"4\":\"43.25608\",\"5\":\"<bbox>\",\"6\":\"Hamilton\"},{\"1\":\"Huntsville ON\",\"2\":\"Huntsville ON\",\"3\":\"-79.21843\",\"4\":\"45.32639\",\"5\":\"<bbox>\",\"6\":\"Huntsville\"},{\"1\":\"Kingston ON\",\"2\":\"Kingston ON\",\"3\":\"-76.48132\",\"4\":\"44.23069\",\"5\":\"<bbox>\",\"6\":\"Kingston\"},{\"1\":\"Kitchener ON\",\"2\":\"Kitchener ON\",\"3\":\"-80.49278\",\"4\":\"43.45129\",\"5\":\"<bbox>\",\"6\":\"Kitchener\"},{\"1\":\"London ON\",\"2\":\"London ON\",\"3\":\"-81.24337\",\"4\":\"42.98324\",\"5\":\"<bbox>\",\"6\":\"London\"},{\"1\":\"Niagara Falls ON\",\"2\":\"Niagara Falls ON\",\"3\":\"-79.06390\",\"4\":\"43.10656\",\"5\":\"<bbox>\",\"6\":\"Niagara Falls\"},{\"1\":\"North Bay ON\",\"2\":\"North Bay ON\",\"3\":\"-79.46076\",\"4\":\"46.30921\",\"5\":\"<bbox>\",\"6\":\"North Bay\"},{\"1\":\"Ottawa ON\",\"2\":\"Ottawa ON\",\"3\":\"-75.69011\",\"4\":\"45.42088\",\"5\":\"<bbox>\",\"6\":\"Ottawa\"},{\"1\":\"Owen Sound ON\",\"2\":\"Owen Sound ON\",\"3\":\"-80.94301\",\"4\":\"44.56781\",\"5\":\"<bbox>\",\"6\":\"Owen Sound\"},{\"1\":\"Peterborough ON\",\"2\":\"Peterborough ON\",\"3\":\"-78.31995\",\"4\":\"44.30480\",\"5\":\"<bbox>\",\"6\":\"Peterborough\"},{\"1\":\"Sarnia ON\",\"2\":\"Sarnia ON\",\"3\":\"-82.40656\",\"4\":\"42.97461\",\"5\":\"<bbox>\",\"6\":\"Sarnia\"},{\"1\":\"Sault Ste Marie ON\",\"2\":\"Sault Ste Marie ON\",\"3\":\"-84.32007\",\"4\":\"46.52391\",\"5\":\"<bbox>\",\"6\":\"Sault Ste Marie\"},{\"1\":\"St Catharines ON\",\"2\":\"St Catharines ON\",\"3\":\"-79.24410\",\"4\":\"43.15798\",\"5\":\"<bbox>\",\"6\":\"St Catharines\"},{\"1\":\"Thunder Bay ON\",\"2\":\"Thunder Bay ON\",\"3\":\"-88.48118\",\"4\":\"49.80966\",\"5\":\"<bbox>\",\"6\":\"Thunder Bay\"},{\"1\":\"Toronto ON\",\"2\":\"Toronto ON\",\"3\":\"-79.38393\",\"4\":\"43.65348\",\"5\":\"<bbox>\",\"6\":\"Toronto\"},{\"1\":\"Windsor ON\",\"2\":\"Windsor ON\",\"3\":\"-83.03734\",\"4\":\"42.31674\",\"5\":\"<bbox>\",\"6\":\"Windsor\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\\normalsize\n\n## Add the divisions, matching by place\n\n- and draw map\n\n\n::: {.cell}\n\n```{.r .cell-code}\npal <- colorFactor(\"Set1\", divisions$division)\n\nontario3 %>% left_join(divisions) %>% \n  select(place, x, y, division) %>% \n  leaflet() %>% \n  addTiles() %>% \n  addCircleMarkers(lng = ~x, lat = ~y, \n                   color = ~pal(division)) \n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-e7b47e3a84e5ef603f0f\" style=\"width:960px;height:480px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-e7b47e3a84e5ef603f0f\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"https://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]},{\"method\":\"addCircleMarkers\",\"args\":[[44.3893113,44.1633264,43.1408157,44.5895925,45.0184417,43.2560802,45.3263919,44.230687,43.451291,42.9832406,43.1065603,46.3092115,45.4208777,44.5678105,44.3048009,42.9746137,46.52391,43.1579812,49.809661,43.6534817,42.3167397],[-79.69017359999999,-77.38525559999999,-80.26317330000001,-75.6843332,-74.728703,-79.8728583,-79.218434,-76.481323,-80.49278150000001,-81.24337199999999,-79.0639039,-79.46076170000001,-75.6901106,-80.94300939999999,-78.3199496,-82.4065585,-84.32006800000001,-79.2441003,-88.48117910000001,-79.3839347,-83.03733889999999],10,null,null,{\"interactive\":true,\"className\":\"\",\"stroke\":true,\"color\":[\"#E41A1C\",\"#377EB8\",\"#E41A1C\",\"#377EB8\",\"#377EB8\",\"#E41A1C\",\"#4DAF4A\",\"#377EB8\",\"#E41A1C\",\"#984EA3\",\"#E41A1C\",\"#4DAF4A\",\"#377EB8\",\"#E41A1C\",\"#377EB8\",\"#984EA3\",\"#4DAF4A\",\"#E41A1C\",\"#4DAF4A\",\"#E41A1C\",\"#984EA3\"],\"weight\":5,\"opacity\":0.5,\"fill\":true,\"fillColor\":[\"#E41A1C\",\"#377EB8\",\"#E41A1C\",\"#377EB8\",\"#377EB8\",\"#E41A1C\",\"#4DAF4A\",\"#377EB8\",\"#E41A1C\",\"#984EA3\",\"#E41A1C\",\"#4DAF4A\",\"#377EB8\",\"#E41A1C\",\"#377EB8\",\"#984EA3\",\"#4DAF4A\",\"#E41A1C\",\"#4DAF4A\",\"#E41A1C\",\"#984EA3\"],\"fillOpacity\":0.2},null,null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[42.3167397,49.809661],\"lng\":[-88.48117910000001,-74.728703]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n\n## Original seven clusters\n\nThe same idea gets a map of the original seven clusters:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npal <- colorFactor(\"Set1\", divisions$cluster)\nontario3 %>% left_join(divisions) %>% \n  select(place, x, y, cluster) %>% \n  leaflet() %>% \n  addTiles() %>% \n  addCircleMarkers(lng = ~x, lat = ~y, \n                   color = ~pal(cluster))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-ac08f39a4ac48f6656d4\" style=\"width:960px;height:480px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-ac08f39a4ac48f6656d4\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"https://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]},{\"method\":\"addCircleMarkers\",\"args\":[[44.3893113,44.1633264,43.1408157,44.5895925,45.0184417,43.2560802,45.3263919,44.230687,43.451291,42.9832406,43.1065603,46.3092115,45.4208777,44.5678105,44.3048009,42.9746137,46.52391,43.1579812,49.809661,43.6534817,42.3167397],[-79.69017359999999,-77.38525559999999,-80.26317330000001,-75.6843332,-74.728703,-79.8728583,-79.218434,-76.481323,-80.49278150000001,-81.24337199999999,-79.0639039,-79.46076170000001,-75.6901106,-80.94300939999999,-78.3199496,-82.4065585,-84.32006800000001,-79.2441003,-88.48117910000001,-79.3839347,-83.03733889999999],10,null,null,{\"interactive\":true,\"className\":\"\",\"stroke\":true,\"color\":[\"#E41A1C\",\"#377EB8\",\"#E41A1C\",\"#4DAF4A\",\"#4DAF4A\",\"#E41A1C\",\"#984EA3\",\"#377EB8\",\"#E41A1C\",\"#FF7F00\",\"#E41A1C\",\"#984EA3\",\"#4DAF4A\",\"#E41A1C\",\"#377EB8\",\"#FF7F00\",\"#FFFF33\",\"#E41A1C\",\"#A65628\",\"#E41A1C\",\"#FF7F00\"],\"weight\":5,\"opacity\":0.5,\"fill\":true,\"fillColor\":[\"#E41A1C\",\"#377EB8\",\"#E41A1C\",\"#4DAF4A\",\"#4DAF4A\",\"#E41A1C\",\"#984EA3\",\"#377EB8\",\"#E41A1C\",\"#FF7F00\",\"#E41A1C\",\"#984EA3\",\"#4DAF4A\",\"#E41A1C\",\"#377EB8\",\"#FF7F00\",\"#FFFF33\",\"#E41A1C\",\"#A65628\",\"#E41A1C\",\"#FF7F00\"],\"fillOpacity\":0.2},null,null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[42.3167397,49.809661],\"lng\":[-88.48117910000001,-74.728703]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [
      "mapping_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"mapping_files/libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"mapping_files/libs/jquery-1.12.4/jquery.min.js\"></script>\n<link href=\"mapping_files/libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"mapping_files/libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"mapping_files/libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"mapping_files/libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"mapping_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"mapping_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"mapping_files/libs/leaflet-binding-2.1.2/leaflet.js\"></script>\n<link href=\"mapping_files/libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"mapping_files/libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}